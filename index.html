<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reserva de Aniversário • Mercatto Delícia</title>
  <style>
    :root{
      --brand:#d4af37;
      --brand-2:#f5d26a;
      --text:#f8f7f4;
      --line:#292929;
      --panel:#111214;
    }

    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--text);background:#000}

    /* HERO */
    .hero{
      position:relative;
      background:url('https://github.com/grupodvbr/aniversariosmercatto/blob/main/paste/Imagem%20do%20WhatsApp%20de%202025-08-27%20%C3%A0(s)%2015.21.11_b5d8c770.jpg?raw=true') no-repeat center top;
      background-size:cover;
      min-height:100vh;
      display:flex;
      align-items:flex-end; /* empurra pro final vertical */
      justify-content:flex-start;
      padding:40px 20px 80px; /* mais espaço embaixo */
    }
    .hero::before{
      content:"";
      position:absolute;inset:0;
      background:rgba(0,0,0,.3);
    }
    .hero-content{
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    /* BOTÕES */
    .btn{
      cursor:pointer;
      border:0;
      border-radius:999px;
      padding:10px 18px;   /* menor */
      font-weight:700;
      font-size:14px;      /* menor fonte */
      color:#1a1500;
      text-align:center;
      text-decoration:none;
      background:linear-gradient(180deg,var(--brand),#c79b1d);
      border:1px solid #d0a62d;
      box-shadow:0 0 8px rgba(212,175,55,.6);
      animation:pulse 2s infinite;
      transition:transform .2s ease;
      width:160px;         /* largura fixa */
      text-align:center;
    }
    .btn:hover{transform:scale(1.05)}
    @keyframes pulse{
      0%{box-shadow:0 0 6px rgba(212,175,55,.4)}
      50%{box-shadow:0 0 18px rgba(245,210,106,.9)}
      100%{box-shadow:0 0 6px rgba(212,175,55,.4)}
    }

    /* POPUP (modal) */
    .modal{
      position:fixed;inset:0;
      background:rgba(0,0,0,.7);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:999;
      padding:10px;
    }
    .modal.active{display:flex}
    .modal-content{
      background:rgba(17,18,20,.95);
      padding:20px;
      border-radius:14px;
      max-width:400px;
      width:100%;
      color:var(--text);
      animation:fadeIn .3s ease;
    }
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(-20px)}
      to{opacity:1;transform:translateY(0)}
    }
    .close{
      background:none;
      border:0;
      color:var(--text);
      font-size:22px;
      float:right;
      cursor:pointer;
    }

    form{display:grid;gap:10px;margin-top:10px}
    label{font-size:12px;color:var(--brand-2)}
    input,textarea{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid var(--line);
      background:#0c0d0f;
      color:var(--text);
    }
    textarea{min-height:60px;resize:vertical}
  </style>
</head>
<body>
  <!-- HERO COM BOTÕES -->
  <section class="hero">
    <div class="hero-content">
      <button class="btn" id="abrirReserva">Reservar</button>
      <a class="btn" id="btnAtendente" href="#" target="_blank" rel="noopener">Atendente</a>
    </div>
  </section>

  <!-- MODAL DE RESERVA -->
  <div class="modal" id="modalReserva">
    <div class="modal-content">
      <button class="close" id="fecharReserva">&times;</button>
      <h2>Faça sua reserva</h2>
      <form id="formReserva">
        <div><label>Nome completo</label><input id="nome" required></div>
        <div><label>Email</label><input id="email" type="email"></div>
        <div><label>Telefone (com DDD)</label><input id="telefone" required></div>
        <div><label>Qtd. Pessoas</label><input id="pessoas" type="number" min="1" max="50" required></div>
        <div><label>Data</label><input id="data" type="date" required></div>
        <div><label>Hora</label><input id="hora" type="time" required></div>
        <div><label>Nº da mesa (opcional)</label><input id="mesa"></div>
        <div><label>Observações</label><textarea id="observacoes"></textarea></div>
        <button type="submit" class="btn">Enviar reserva</button>
        <div id="msg"></div>
      </form>
    </div>
  </div>

<script>
  const CONFIG = {
    SHEET_ENDPOINT:"https://script.google.com/macros/s/SEU_SCRIPT_ID/exec",
    ATENDENTE_WHATS:"5599999999999",
    ATENDENTE_MSG:"Olá! Gostaria de falar com um atendente sobre reserva de aniversário."
  };

  const $=sel=>document.querySelector(sel);

  // Link do WhatsApp
  function buildWhats(phone,text){
    const encoded=encodeURIComponent(text);
    return `https://wa.me/${phone}?text=${encoded}`;
  }
  $('#btnAtendente').href=buildWhats(CONFIG.ATENDENTE_WHATS,CONFIG.ATENDENTE_MSG);

  // Modal abrir/fechar
  $('#abrirReserva').onclick=()=>$('#modalReserva').classList.add('active');
  $('#fecharReserva').onclick=()=>$('#modalReserva').classList.remove('active');
  window.onclick=(e)=>{if(e.target===$('#modalReserva'))$('#modalReserva').classList.remove('active')};

  // Envio
  $('#formReserva').addEventListener('submit',async(ev)=>{
    ev.preventDefault();
    const nome=$('#nome').value.trim();
    const email=$('#email').value.trim();
    const telefone=$('#telefone').value.trim();
    const pessoas=$('#pessoas').value.trim();
    const data=$('#data').value;
    const hora=$('#hora').value;
    const mesa=$('#mesa').value.trim();
    const observacoes=$('#observacoes').value.trim();

    if(!nome||!telefone||!pessoas||!data||!hora){
      $('#msg').innerHTML="<div class='error'>Preencha todos os obrigatórios.</div>";
      return;
    }

    const id='R'+Date.now().toString(36);
    const carimbo=new Date().toISOString();
    const dataHoraISO=new Date(`${data}T${hora}:00`).toISOString();

    const payload={ID:id,Carimbo:carimbo,Nome:nome,Email:email,Telefone:telefone,Pessoas:pessoas,Mesa:mesa,DataHora:dataHoraISO,Status:'Pendente',Observacoes:observacoes};

    try{
      const r=await fetch(CONFIG.SHEET_ENDPOINT,{
        method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)
      });
      if(r.ok){
        $('#msg').innerHTML="<div class='success'>Reserva enviada!</div>";
        $('#formReserva').reset();
      }else{throw new Error()}
    }catch{ $('#msg').innerHTML="<div class='error'>Erro ao enviar reserva.</div>"; }
  });
</script>
</body>
</html>
